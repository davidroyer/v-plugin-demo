/*!
 * v-plugin-demo v0.1.0 
 * (c) 2019 David Royer
 * Released under the undefined License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("quill")):"function"==typeof define&&define.amd?define(["quill"],e):(t=t||self,t.VPluginDemo=e(t.Quill))}(this,function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function l(t,e){return r(t)||a(t,e)||s()}function r(t){if(Array.isArray(t))return t}function a(t,e){var n=[],i=!0,o=!1,l=void 0;try{for(var r,a=t[Symbol.iterator]();!(i=(r=a.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(t){o=!0,l=t}finally{try{i||null==a.return||a.return()}finally{if(o)throw l}}return n}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(t,e,n,i,o,l,r,a,s,u){"boolean"!=typeof r&&(s=a,a=r,r=!1);var c="function"==typeof n?n.options:n;t&&t.render&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0,o&&(c.functional=!0)),i&&(c._scopeId=i);var d;if(l?(d=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,s(t)),t&&t._registeredComponents&&t._registeredComponents.add(l)},c._ssrRegister=d):e&&(d=r?function(){e.call(this,u(this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),d)if(c.functional){var h=c.render;c.render=function(t,e){return d.call(e),h(t,e)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,d):[d]}return n}function c(t,n){var i=function(t){return t&&"object"===e(t)};return i(t)&&i(n)?(Object.keys(n).forEach(function(e){var o=t[e],l=n[e];Array.isArray(o)&&Array.isArray(l)?t[e]=o.concat(l):i(o)&&i(l)?t[e]=c(Object.assign({},o),l):t[e]=l}),t):n}t=t&&t.hasOwnProperty("default")?t.default:t;var d=[[{font:[]}],[{header:[!1,1,2,3,4,5,6]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],[{header:1},{header:2}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image","video","formula"],[{direction:"rtl"}],["clean"]],h=[[{header:[!1,1,2,3,4,5,6]}],["bold","italic","underline","strike"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","image","video"],["clean"]],f={props:{customModules:Array},methods:{registerCustomModules:function(t){void 0!==this.customModules&&this.customModules.forEach(function(e){t.register("modules/"+e.alias,e.module)})}}},m=function(){function t(e,i){var o=this;n(this,t),this.quill=e,this.options=i,this.ignoreTags=["PRE"],this.matches=[{name:"header",pattern:/^(#){1,6}\s/g,action:function(t,e,n){var i=n.exec(t);if(i){var l=i[0].length;setTimeout(function(){o.quill.formatLine(e.index,0,"header",l-1),o.quill.deleteText(e.index-l,l)},0)}}},{name:"blockquote",pattern:/^(>)\s/g,action:function(t,e){setTimeout(function(){o.quill.formatLine(e.index,1,"blockquote",!0),o.quill.deleteText(e.index-2,2)},0)}},{name:"code-block",pattern:/^`{3}(?:\s|\n)/g,action:function(t,e){setTimeout(function(){o.quill.formatLine(e.index,1,"code-block",!0),o.quill.deleteText(e.index-4,4)},0)}},{name:"bolditalic",pattern:/(?:\*|_){3}(.+?)(?:\*|_){3}/g,action:function(t,e,n,i){var l=n.exec(t),r=l[0],a=l[1],s=i+l.index;t.match(/^([*_ \n]+)$/g)||setTimeout(function(){o.quill.deleteText(s,r.length),o.quill.insertText(s,a,{bold:!0,italic:!0}),o.quill.format("bold",!1)},0)}},{name:"bold",pattern:/(?:\*|_){2}(.+?)(?:\*|_){2}/g,action:function(t,e,n,i){var l=n.exec(t),r=l[0],a=l[1],s=i+l.index;t.match(/^([*_ \n]+)$/g)||setTimeout(function(){o.quill.deleteText(s,r.length),o.quill.insertText(s,a,{bold:!0}),o.quill.format("bold",!1)},0)}},{name:"italic",pattern:/(?:\*|_){1}(.+?)(?:\*|_){1}/g,action:function(t,e,n,i){var l=n.exec(t),r=l[0],a=l[1],s=i+l.index;t.match(/^([*_ \n]+)$/g)||setTimeout(function(){o.quill.deleteText(s,r.length),o.quill.insertText(s,a,{italic:!0}),o.quill.format("italic",!1)},0)}},{name:"strikethrough",pattern:/(?:~~)(.+?)(?:~~)/g,action:function(t,e,n,i){var l=n.exec(t),r=l[0],a=l[1],s=i+l.index;t.match(/^([*_ \n]+)$/g)||setTimeout(function(){o.quill.deleteText(s,r.length),o.quill.insertText(s,a,{strike:!0}),o.quill.format("strike",!1)},0)}},{name:"code",pattern:/(?:`)(.+?)(?:`)/g,action:function(t,e,n,i){var l=n.exec(t),r=l[0],a=l[1],s=i+l.index;t.match(/^([*_ \n]+)$/g)||setTimeout(function(){o.quill.deleteText(s,r.length),o.quill.insertText(s,a,{code:!0}),o.quill.format("code",!1),o.quill.insertText(o.quill.getSelection()," ")},0)}},{name:"asterisk-ul",pattern:/^(\*|\+)\s$/g,action:function(t,e,n){setTimeout(function(){o.quill.formatLine(e.index,1,"list","unordered"),o.quill.deleteText(e.index-2,2)},0)}},{name:"image",pattern:/(?:!\[(.+?)\])(?:\((.+?)\))/g,action:function(t,e,n){var i=t.search(n),l=t.match(n)[0],r=t.match(/(?:\((.*?)\))/g)[0],a=e.index-l.length-1;-1!==i&&setTimeout(function(){o.quill.deleteText(a,l.length),o.quill.insertEmbed(a,"image",r.slice(1,r.length-1))},0)}},{name:"link",pattern:/(?:\[(.+?)\])(?:\((.+?)\))/g,action:function(t,e,n){var i=t.search(n),l=t.match(n)[0],r=t.match(/(?:\[(.*?)\])/g)[0],a=t.match(/(?:\((.*?)\))/g)[0],s=e.index-l.length-1;-1!==i&&setTimeout(function(){o.quill.deleteText(s,l.length),o.quill.insertText(s,r.slice(1,r.length-1),"link",a.slice(1,a.length-1))},0)}}],this.quill.on("text-change",function(t,e,n){for(var i=0;i<t.ops.length;i++)t.ops[i].hasOwnProperty("insert")&&(" "===t.ops[i].insert?o.onSpace():"\n"===t.ops[i].insert&&o.onEnter())})}return o(t,[{key:"isValid",value:function(t,e){return void 0!==t&&t&&-1===this.ignoreTags.indexOf(e)}},{key:"onSpace",value:function(){var t=this.quill.getSelection();if(t){var e=this.quill.getLine(t.index),n=l(e,2),i=n[0],o=n[1],r=i.domNode.textContent,a=t.index-o;if(this.isValid(r,i.domNode.tagName)){var s=!0,u=!1,c=void 0;try{for(var d,h=this.matches[Symbol.iterator]();!(s=(d=h.next()).done);s=!0){var f=d.value;if(r.match(f.pattern))return console.log("matched:",f.name,r),void f.action(r,t,f.pattern,a)}}catch(t){u=!0,c=t}finally{try{s||null==h.return||h.return()}finally{if(u)throw c}}}}}},{key:"onEnter",value:function(){var t=this.quill.getSelection();if(t){var e=this.quill.getLine(t.index),n=l(e,2),i=n[0],o=n[1],r=i.domNode.textContent+" ",a=t.index-o;if(t.length=t.index++,this.isValid(r,i.domNode.tagName)){var s=!0,u=!1,c=void 0;try{for(var d,h=this.matches[Symbol.iterator]();!(s=(d=h.next()).done);s=!0){var f=d.value;if(r.match(f.pattern))return console.log("matched",f.name,r),void f.action(r,t,f.pattern,a)}}catch(t){u=!0,c=t}finally{try{s||null==h.return||h.return()}finally{if(u)throw c}}}}}}]),t}();console.log("TCL: defaultToolbar",h),console.log("TCL: oldApi",f),console.log("TCL: MarkdownShortcuts",m),console.log("TCL: fullToolbar",d);var p={props:{value:String,placeholder:String,readonly:Boolean,formats:Array,editorStyle:null},data:function(){return{quill:null}},watch:{value:function(t,e){t!==e&&this.quill&&!this.quill.hasFocus()&&this.renderValue(t)}},mounted:function(){var e=this;this.quill=new t(this.$refs.editorElement,{modules:{toolbar:this.$refs.toolbarElement},readOnly:this.readOnly,theme:"snow",formats:this.formats}),this.quill.on("text-change",function(t,n){var i=e.$refs.editorElement.children[0].innerHTML;"<p><br></p>"===i&&(i=""),e.$emit("input",i),e.$emit("text-change",{htmlValue:i,textValue:e.quill.getText(),delta:t,source:n})}),this.renderValue(this.value)},methods:{renderValue:function(t){this.quill&&(t?this.quill.pasteHTML(t):this.quill.setText(""))}},beforeDestroy:function(){this.quill=null}},v=u;const g=p;var q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-editor-container"},[n("div",{ref:"toolbarElement",staticClass:"p-editor-toolbar"},[t._t("toolbar",[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5)])],2),t._v(" "),n("div",{ref:"editorElement",staticClass:"p-editor-content",style:t.editorStyle})])},y=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"ql-formats"},[n("select",{staticClass:"ql-header",attrs:{defaultValue:"0"}},[n("option",{attrs:{value:"1"}},[t._v("Heading")]),t._v(" "),n("option",{attrs:{value:"2"}},[t._v("Subheading")]),t._v(" "),n("option",{attrs:{value:"0"}},[t._v("Normal")])]),t._v(" "),n("select",{staticClass:"ql-font"},[n("option"),t._v(" "),n("option",{attrs:{value:"serif"}}),t._v(" "),n("option",{attrs:{value:"monospace"}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"ql-formats"},[n("button",{staticClass:"ql-bold"}),t._v(" "),n("button",{staticClass:"ql-italic"}),t._v(" "),n("button",{staticClass:"ql-underline"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"ql-formats"},[n("select",{staticClass:"ql-color"}),t._v(" "),n("select",{staticClass:"ql-background"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"ql-formats"},[n("button",{staticClass:"ql-list",attrs:{value:"ordered"}}),t._v(" "),n("button",{staticClass:"ql-list",attrs:{value:"bullet"}}),t._v(" "),n("select",{staticClass:"ql-align"},[n("option",{attrs:{defaultValue:""}}),t._v(" "),n("option",{attrs:{value:"center"}}),t._v(" "),n("option",{attrs:{value:"right"}}),t._v(" "),n("option",{attrs:{value:"justify"}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"ql-formats"},[n("button",{staticClass:"ql-link"}),t._v(" "),n("button",{staticClass:"ql-image"}),t._v(" "),n("button",{staticClass:"ql-code-block"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"ql-formats"},[n("button",{staticClass:"ql-clean"})])}];var b=v({render:q,staticRenderFns:y},void 0,g,void 0,!1,void 0,void 0,void 0),_={name:"VueEditor",mixins:[f],props:{id:{type:String,default:"quill-container"},placeholder:{type:String,default:""},value:{type:String,default:""},disabled:{type:Boolean},editorToolbar:{type:Array,default:function(){return[]}},editorOptions:{type:Object,required:!1,default:function(){return{}}},useCustomImageHandler:{type:Boolean,default:!1},useMarkdownShortcuts:{type:Boolean,default:!1}},data:function(){return{quill:null}},watch:{value:function(t){t==this.quill.root.innerHTML||this.quill.hasFocus()||(this.quill.root.innerHTML=t)},disabled:function(t){this.quill.enable(!t)}},mounted:function(){this.registerCustomModules(t),this.registerPrototypes(),this.initializeEditor()},beforeDestroy:function(){this.quill=null,delete this.quill},methods:{initializeEditor:function(){this.setupQuillEditor(),this.checkForCustomImageHandler(),this.handleInitialContent(),this.registerEditorEventListeners(),this.$emit("ready",this.quill)},setupQuillEditor:function(){var e={debug:!1,modules:this.setModules(),theme:"snow",placeholder:this.placeholder?this.placeholder:"",readOnly:!!this.disabled&&this.disabled};this.prepareEditorConfig(e),this.quill=new t(this.$refs.quillContainer,e)},setModules:function(){var e={toolbar:this.editorToolbar.length?this.editorToolbar:h};return this.useMarkdownShortcuts&&(t.register("modules/markdownShortcuts",m,!0),e.markdownShortcuts={}),e},prepareEditorConfig:function(t){Object.keys(this.editorOptions).length>0&&this.editorOptions.constructor===Object&&(this.editorOptions.modules&&void 0!==this.editorOptions.modules.toolbar&&delete t.modules.toolbar,c(t,this.editorOptions))},registerPrototypes:function(){t.prototype.getHTML=function(){return this.container.querySelector(".ql-editor").innerHTML},t.prototype.getWordCount=function(){return this.container.querySelector(".ql-editor").innerText.length}},registerEditorEventListeners:function(){this.quill.on("text-change",this.handleTextChange),this.quill.on("selection-change",this.handleSelectionChange),this.listenForEditorEvent("text-change"),this.listenForEditorEvent("selection-change"),this.listenForEditorEvent("editor-change")},listenForEditorEvent:function(t){var e=this;this.quill.on(t,function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];e.$emit.apply(e,[t].concat(i))})},handleInitialContent:function(){this.value&&(this.quill.root.innerHTML=this.value)},handleSelectionChange:function(t,e){!t&&e?this.$emit("blur",this.quill):t&&!e&&this.$emit("focus",this.quill)},handleTextChange:function(){var t="<p><br></p>"===this.quill.getHTML()?"":this.quill.getHTML();this.$emit("input",t)},checkForCustomImageHandler:function(){!0===this.useCustomImageHandler&&this.setupCustomImageHandler()},setupCustomImageHandler:function(){this.quill.getModule("toolbar").addHandler("image",this.customImageHandler)},customImageHandler:function(t,e){this.$refs.fileInput.click()},emitImageInfo:function(t){var e=function(){document.getElementById("file-upload").value=""},n=t.target.files[0],i=this.quill,o=i.getSelection(),l=o.index;this.$emit("imageAdded",n,i,l,e)}}};const x=_;var T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"quillWrapper"},[t._t("toolbar"),t._v(" "),n("div",{ref:"quillContainer",attrs:{id:t.id}}),t._v(" "),t.useCustomImageHandler?n("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{id:"file-upload",type:"file",accept:"image/*"},on:{change:function(e){t.emitImageInfo(e)}}}):t._e()],2)},C=[];var E=v({render:T,staticRenderFns:C},void 0,x,void 0,!1,void 0,void 0,void 0),k=function(t){t.prototype.$add=function(t,e){return t+e},t.component("Editor",b),t.component("VueEditor",E)},S={install:k,version:"0.1.0"};return"undefined"!=typeof window&&window.Vue&&window.Vue.use(S),S});